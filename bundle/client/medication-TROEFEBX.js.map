{
  "version": 3,
  "sources": ["../../client/medication.tsx"],
  "sourcesContent": ["import React, { FormEvent, useEffect, useState } from 'react';\nimport { Medication } from '../types';\n\nexport default () => {\n    const { id, patient } = Object.fromEntries(new URLSearchParams(location.search));\n\n    const [ medication, setMedication ] = useState<Medication>({ id, patient, title: '', description: '', active: false });\n\n    const [ modalState, setModalState ] = useState<boolean>(false);\n    const modalOpen = () => setModalState(true);\n    const modalClose = () => setModalState(false);\n\n    const remove = () => modalOpen();\n\n    const submit = async (e: FormEvent) => {\n        e.preventDefault();\n\n        const result = await fetch(`/api/medication`, {\n            method: 'PUT',\n            body: JSON.stringify(medication),\n        }).then(r => r.json());\n\n        if (!id) location.search += `&id=${result.id}`;\n    };\n\n    const change = (e: FormEvent<HTMLFormElement>) => {\n        const { type, name, value, checked } = e.target as HTMLInputElement;\n        setMedication({ ...medication, [ name ]: type === 'checkbox' ? checked : value });\n    };\n\n    useEffect(() => {\n\n        if (id) {\n            fetch(`/api/medication?id=${id}`, { method: 'GET' })\n                .then(r => r.json())\n                .then(setMedication)\n        }\n\n    }, []);\n\n    return (<>\n\n        <div className=\"row\">\n            <a href={`/patient?id=${patient}`} className=\"button transparent\">\n                <i>arrow_back</i>\n            </a>\n            <h1 className=\"max\">Medication</h1>\n            {id && <button type=\"button\" className=\"border error-border error-text\" onClick={remove}>\n                <i>delete</i>\n                <span>Remove Medication</span>\n            </button>}\n        </div>\n\n        <article className=\"border\">\n            <h5 className=\"padding\">Details</h5>\n            <form className=\"grid\" onSubmit={submit} onChange={change}>\n                <div className=\"field label border s12 m6\">\n                    <input name=\"title\" value={medication?.title} required/>\n                    <label>Title</label>\n                </div>\n                <div className=\"field s12 m6 grid\">\n                    <div className=\"s10\">\n                        <h6>Active</h6>\n                        <div>Medications cannot be removed.</div>\n                    </div>\n                    <label className=\"switch s2\">\n                        <input name=\"active\" type=\"checkbox\" checked={medication?.active} />\n                        <span></span>\n                    </label>\n                </div>\n                <div className=\"field textarea label border s12\">\n                    <textarea name=\"description\" value={medication?.description} required></textarea>\n                    <label>Description</label>\n                </div>\n                <div className=\"s12 right-align\">\n                    <button className=\"border\" type=\"submit\">\n                        <i>{id ? 'save' : 'add'}</i>\n                        <span>{id ? 'Save' : 'Add'}</span>\n                    </button>\n                </div>\n            </form>\n        </article>\n\n        <dialog className=\"modal\" open={modalState}>\n            <div className=\"grid\">\n                <h5 className=\"s10\">Remove Medication</h5>\n                <button className=\"s2\" onClick={modalClose}>\n                    <i>close</i>\n                </button>\n            </div>\n            <p>Removing medication is not allowed.</p>\n        </dialog>\n\n    </>);\n};"],
  "mappings": "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",
  "names": ["import_react", "medication_default", "id", "patient", "medication", "setMedication", "modalState", "setModalState", "modalOpen", "modalClose", "remove", "submit", "e", "result", "r", "change", "type", "name", "value", "checked", "React"]
}
