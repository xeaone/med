import{b as v,c as g}from"./chunk-FUKNUBDN.js";var e=v(g(),1),P=()=>{let{id:t}=Object.fromEntries(new URLSearchParams(location.search)),[s,o]=(0,e.useState)({id:t,firstName:"",lastName:""}),[l,m]=(0,e.useState)([]),[d,r]=(0,e.useState)(!1),p=()=>r(!0),b=()=>r(!1),h=()=>{p()},c=async a=>{a.preventDefault();let i=await fetch("/api/patient",{method:"PUT",body:JSON.stringify(s)}).then(n=>n.json());t||(location.search+=`&id=${i.id}`)},N=a=>{let{type:i,name:n,value:u,checked:f}=a.target;o({...s,[n]:i==="checkbox"?f:u})};return(0,e.useEffect)(()=>{let{id:a}=Object.fromEntries(new URLSearchParams(location.search));fetch(`/api/patient?id=${a}`,{method:"GET"}).then(i=>i.json()).then(o),fetch(`/api/medications?patient=${a}`,{method:"GET"}).then(i=>i.json()).then(m)},[]),e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:"row"},e.default.createElement("a",{href:"/patients",className:"button transparent"},e.default.createElement("i",null,"arrow_back")),e.default.createElement("h1",{className:"max"},"Patient"),t&&e.default.createElement("button",{className:"border error-border error-text",onClick:h},e.default.createElement("i",null,"delete"),e.default.createElement("span",null,"Remove Patient"))),e.default.createElement("article",{className:"border"},e.default.createElement("h5",{className:"padding"},"Details"),e.default.createElement("form",{onSubmit:c,onChange:N,className:"grid"},e.default.createElement("div",{className:"field label border s12 m6"},e.default.createElement("input",{name:"firstName",value:s.firstName,required:!0}),e.default.createElement("label",null,"First Name")),e.default.createElement("div",{className:"field label border s12 m6"},e.default.createElement("input",{name:"lastName",value:s.lastName,required:!0}),e.default.createElement("label",null,"Last Name")),e.default.createElement("div",{className:"s12 right-align"},e.default.createElement("button",{className:"border",type:"submit"},e.default.createElement("i",null,t?"save":"add"),e.default.createElement("span",null,t?"Save":"Add"))))),e.default.createElement("article",{className:"border"},e.default.createElement("div",{className:"row"},e.default.createElement("h5",{className:"max"},"Medications"),e.default.createElement("a",{className:"button border",href:`/medication?patient=${s.id}`},e.default.createElement("i",null,"add"),e.default.createElement("span",null,"Add Medication"))),e.default.createElement("ul",{className:"list"},l.map(a=>e.default.createElement(e.default.Fragment,null,e.default.createElement("li",null,e.default.createElement("i",null,"medication"),e.default.createElement("span",{className:"max"},a.title),e.default.createElement("a",{className:"button border",href:`/medication?id=${a.id}&patient=${s.id}`},"View")))))),e.default.createElement("dialog",{className:"modal",open:d},e.default.createElement("div",{className:"grid"},e.default.createElement("h5",{className:"s10"},"Remove Patient"),e.default.createElement("button",{className:"s2",onClick:b},e.default.createElement("i",null,"close"))),e.default.createElement("p",null,"Removing Patient is not allowed.")))};export{P as default};
//# sourceMappingURL=patient-4R2HW222.js.map
