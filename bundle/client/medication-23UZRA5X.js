import{b as y,c as k}from"./chunk-FUKNUBDN.js";var e=y(k(),1),M=()=>{let{id:i,patient:l}=Object.fromEntries(new URLSearchParams(location.search)),[o,t]=(0,e.useState)({id:i,patient:l,title:"",time:"",dosage:"",active:!1,recurrence:"",description:""}),[m,d]=(0,e.useState)([]),[b,r]=(0,e.useState)(!1),c=()=>r(!0),p=()=>r(!1),v=()=>c(),u=async()=>{let a=await fetch("/api/log",{method:"PUT",body:JSON.stringify({stamp:Date.now(),medication:o.id})}).then(s=>s.json());await fetch(`/api/logs?medication=${i}`,{method:"GET"}).then(s=>s.json()).then(d)},h=async a=>{a.preventDefault();let s=await fetch("/api/medication",{method:"PUT",body:JSON.stringify(o)}).then(n=>n.json());i||(location.search+=`&id=${s.id}`)},g=a=>{let{type:s,name:n,value:f,checked:N}=a.target;t({...o,[n]:s==="checkbox"?N:f})};return(0,e.useEffect)(()=>{i&&(fetch(`/api/medication?id=${i}`,{method:"GET"}).then(a=>a.json()).then(t),fetch(`/api/logs?medication=${i}`,{method:"GET"}).then(a=>a.json()).then(d))},[]),e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:"row"},e.default.createElement("button",{onClick:()=>{l?location.pathname=`/patient?id=${l}`:history.back()},className:"border"},e.default.createElement("i",null,"arrow_back")),e.default.createElement("h1",{className:"max padding"},"Medication"),i&&e.default.createElement("button",{type:"button",className:"border error-border error-text",onClick:v},e.default.createElement("i",null,"delete"),e.default.createElement("span",null,"Remove Medication"))),e.default.createElement("article",{className:"border"},e.default.createElement("h5",{className:"padding"},"Details"),e.default.createElement("form",{className:"grid",onSubmit:h,onChange:g},e.default.createElement("div",{className:"field s12 grid right-align"},e.default.createElement("div",{className:"s11 right-align"},e.default.createElement("h6",null,"Active"),e.default.createElement("div",null,"Medications cannot be removed.")),e.default.createElement("label",{className:"switch s1 right-align"},e.default.createElement("input",{name:"active",type:"checkbox",checked:o?.active}),e.default.createElement("span",null))),e.default.createElement("div",{className:"field label border s12 m6"},e.default.createElement("input",{name:"title",value:o?.title,required:!0}),e.default.createElement("label",null,"Title")),e.default.createElement("div",{className:"field label border s12 m6"},e.default.createElement("input",{name:"dosage",value:o?.dosage,required:!0}),e.default.createElement("label",null,"Dosage")),e.default.createElement("div",{className:"field label border s12 m6"},e.default.createElement("input",{type:"time",name:"time",value:o?.time,required:!0}),e.default.createElement("label",null,"Time")),e.default.createElement("div",{className:"field border label suffix s12 m6"},e.default.createElement("select",{name:"recurrence",value:o?.recurrence,required:!0},e.default.createElement("option",{value:"",selected:!0,disabled:!0}),e.default.createElement("option",{value:"daily"},"Daily"),e.default.createElement("option",{value:"weekly"},"Weekly")),e.default.createElement("label",null,"Recurrence"),e.default.createElement("i",null,"arrow_drop_down")),e.default.createElement("div",{className:"field textarea label border s12"},e.default.createElement("textarea",{name:"description",value:o?.description,required:!0}),e.default.createElement("label",null,"Description")),e.default.createElement("div",{className:"s12 right-align"},e.default.createElement("button",{className:"border",type:"submit"},e.default.createElement("i",null,i?"save":"add"),e.default.createElement("span",null,i?"Save":"Add"))))),i&&e.default.createElement("article",{className:"border"},e.default.createElement("div",{className:"row"},e.default.createElement("h5",{className:"max padding"},"Logs"),e.default.createElement("button",{type:"button",className:"border",onClick:u},e.default.createElement("i",null,"add"),e.default.createElement("span",null,"Mark Taken"))),e.default.createElement("ul",{className:"list large-space border"},m.map(a=>e.default.createElement(e.default.Fragment,null,e.default.createElement("li",null,e.default.createElement("i",null,"schedule"),e.default.createElement("div",{className:"max grid"},e.default.createElement("div",{className:"s12"},new Date(a.stamp).toLocaleString()))))))),e.default.createElement("dialog",{className:"modal",open:b},e.default.createElement("div",{className:"grid"},e.default.createElement("h5",{className:"s10"},"Remove Medication"),e.default.createElement("button",{className:"s2",onClick:p},e.default.createElement("i",null,"close"))),e.default.createElement("p",null,"Removing medication is not allowed.")))};export{M as default};
//# sourceMappingURL=medication-23UZRA5X.js.map
