import{b as f,c as N}from"./chunk-FUKNUBDN.js";var e=f(N(),1),M=()=>{let{id:i,patient:n}=Object.fromEntries(new URLSearchParams(location.search)),[a,l]=(0,e.useState)({id:i,patient:n,title:"",description:"",active:!1}),[r,d]=(0,e.useState)(!1),m=()=>d(!0),c=()=>d(!1),v=()=>m(),b=async s=>{s.preventDefault();let o=await fetch("/api/medication",{method:"PUT",body:JSON.stringify(a)}).then(t=>t.json());i||(location.search+=`&id=${o.id}`)},p=s=>{let{type:o,name:t,value:h,checked:u}=s.target;l({...a,[t]:o==="checkbox"?u:h})};return(0,e.useEffect)(()=>{i&&fetch(`/api/medication?id=${i}`,{method:"GET"}).then(s=>s.json()).then(l)},[]),e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:"row"},e.default.createElement("a",{href:`/patient?id=${n}`,className:"button transparent"},e.default.createElement("i",null,"arrow_back")),e.default.createElement("h1",{className:"max"},"Medication"),i&&e.default.createElement("button",{type:"button",className:"border error-border error-text",onClick:v},e.default.createElement("i",null,"delete"),e.default.createElement("span",null,"Remove Medication"))),e.default.createElement("article",{className:"border"},e.default.createElement("h5",{className:"padding"},"Details"),e.default.createElement("form",{className:"grid",onSubmit:b,onChange:p},e.default.createElement("div",{className:"field label border s12 m6"},e.default.createElement("input",{name:"title",value:a?.title,required:!0}),e.default.createElement("label",null,"Title")),e.default.createElement("div",{className:"field s12 m6 grid"},e.default.createElement("div",{className:"s10"},e.default.createElement("h6",null,"Active"),e.default.createElement("div",null,"Medications cannot be removed.")),e.default.createElement("label",{className:"switch s2"},e.default.createElement("input",{name:"active",type:"checkbox",checked:a?.active}),e.default.createElement("span",null))),e.default.createElement("div",{className:"field textarea label border s12"},e.default.createElement("textarea",{name:"description",value:a?.description,required:!0}),e.default.createElement("label",null,"Description")),e.default.createElement("div",{className:"s12 right-align"},e.default.createElement("button",{className:"border",type:"submit"},e.default.createElement("i",null,i?"save":"add"),e.default.createElement("span",null,i?"Save":"Add"))))),e.default.createElement("dialog",{className:"modal",open:r},e.default.createElement("div",{className:"grid"},e.default.createElement("h5",{className:"s10"},"Remove Medication"),e.default.createElement("button",{className:"s2",onClick:c},e.default.createElement("i",null,"close"))),e.default.createElement("p",null,"Removing medication is not allowed.")))};export{M as default};
//# sourceMappingURL=medication-TROEFEBX.js.map
