{
  "version": 3,
  "sources": ["../../client/patient.tsx"],
  "sourcesContent": ["import React, { FormEvent, useEffect, useState } from 'react';\nimport { Medication, Patient } from '../types';\n\nexport default () => {\n    const { id } = Object.fromEntries(new URLSearchParams(location.search));\n\n    const [ patient, setPatient ] = useState<Patient>({ id, firstName: '', lastName: '', });\n    const [ medications, setMedications ] = useState<Array<Medication>>([]);\n\n    const [ modalState, setModalState ] = useState<boolean>(false);\n    const modalOpen = () => setModalState(true);\n    const modalClose = () => setModalState(false);\n\n    const remove = () => {\n        modalOpen();\n    };\n\n    const submit = async (e: FormEvent) => {\n        e.preventDefault();\n\n        const result = await fetch(`/api/patient`, {\n            method: 'PUT',\n            body: JSON.stringify(patient),\n        }).then(r => r.json());\n\n        if (!id) location.search += `&id=${result.id}`;\n    };\n\n    const change = (e: FormEvent<HTMLFormElement>) => {\n        const { type, name, value, checked } = e.target as HTMLInputElement;\n        setPatient({ ...patient, [ name ]: type === 'checkbox' ? checked : value });\n    };\n\n    const back = () => history.back();\n\n    useEffect(() => {\n        const { id } = Object.fromEntries(new URLSearchParams(location.search));\n\n        fetch(`/api/patient?id=${id}`, { method: 'GET' })\n            .then(r => r.json())\n            .then(setPatient);\n\n        fetch(`/api/medications?patient=${id}`, { method: 'GET' })\n            .then(r => r.json())\n            .then(setMedications);\n\n    }, []);\n\n    return (<>\n\n        <div className=\"row\">\n            <button onClick={back} className=\"border\">\n                <i>arrow_back</i>\n            </button>\n            <h1 className=\"max padding\">Patient</h1>\n            {id && <button className=\"border error-border error-text\" onClick={remove}>\n                <i>delete</i>\n                <span>Remove Patient</span>\n            </button>}\n        </div>\n\n        <article className=\"border\">\n            <h5 className=\"padding\">Details</h5>\n            <form onSubmit={submit} onChange={change} className=\"grid\">\n                <div className=\"field label border s12 m6\">\n                    <input name=\"firstName\" value={patient.firstName} required/>\n                    <label>First Name</label>\n                </div>\n                <div className=\"field label border s12 m6\">\n                    <input name=\"lastName\" value={patient.lastName} required/>\n                    <label>Last Name</label>\n                </div>\n                <div className=\"s12 right-align\">\n                    <button className=\"border\" type=\"submit\">\n                        <i>{id ? 'save' : 'add'}</i>\n                        <span>{id ? 'Save' : 'Add'}</span>\n                    </button>\n                </div>\n            </form>\n        </article>\n\n        <article className=\"border\">\n            <div className=\"row padding\">\n                <h5 className=\"max\">Medications</h5>\n                <a className=\"button border\" href={`/medication?patient=${patient.id}`}>\n                    <i>add</i>\n                    <span>Add Medication</span>\n                </a>\n            </div>\n            <ul className=\"list large-space border\">\n                {medications.map(medication => <>\n                    <li>\n                        <i>medication</i>\n                        <span className=\"max\">{medication.title}</span>\n                        <a className=\"button border\" href={`/medication?id=${medication.id}&patient=${patient.id}`}>View</a>\n                    </li>\n                </>)}\n            </ul>\n        </article>\n\n        <dialog className=\"modal\" open={modalState}>\n            <div className=\"grid\">\n                <h5 className=\"s10\">Remove Patient</h5>\n                <button className=\"s2\" onClick={modalClose}>\n                    <i>close</i>\n                </button>\n            </div>\n            <p>Removing Patient is not allowed.</p>\n        </dialog>\n\n    </>);\n};"],
  "mappings": "+CAAA,IAAAA,EAAsD,SAG/CC,EAAQ,IAAM,CACjB,GAAM,CAAE,GAAAC,CAAG,EAAI,OAAO,YAAY,IAAI,gBAAgB,SAAS,MAAM,CAAC,EAEhE,CAAEC,EAASC,CAAW,KAAI,YAAkB,CAAE,GAAAF,EAAI,UAAW,GAAI,SAAU,EAAI,CAAC,EAChF,CAAEG,EAAaC,CAAe,KAAI,YAA4B,CAAC,CAAC,EAEhE,CAAEC,EAAYC,CAAc,KAAI,YAAkB,EAAK,EACvDC,EAAY,IAAMD,EAAc,EAAI,EACpCE,EAAa,IAAMF,EAAc,EAAK,EAEtCG,EAAS,IAAM,CACjBF,EAAU,CACd,EAEMG,EAAS,MAAOC,GAAiB,CACnCA,EAAE,eAAe,EAEjB,IAAMC,EAAS,MAAM,MAAM,eAAgB,CACvC,OAAQ,MACR,KAAM,KAAK,UAAUX,CAAO,CAChC,CAAC,EAAE,KAAKY,GAAKA,EAAE,KAAK,CAAC,EAEhBb,IAAI,SAAS,QAAU,OAAOY,EAAO,EAAE,GAChD,EAEME,EAAUH,GAAkC,CAC9C,GAAM,CAAE,KAAAI,EAAM,KAAAC,EAAM,MAAAC,EAAO,QAAAC,CAAQ,EAAIP,EAAE,OACzCT,EAAW,CAAE,GAAGD,EAAS,CAAEe,CAAK,EAAGD,IAAS,WAAaG,EAAUD,CAAM,CAAC,CAC9E,EAEME,EAAO,IAAM,QAAQ,KAAK,EAEhC,sBAAU,IAAM,CACZ,GAAM,CAAE,GAAAnB,CAAG,EAAI,OAAO,YAAY,IAAI,gBAAgB,SAAS,MAAM,CAAC,EAEtE,MAAM,mBAAmBA,CAAE,GAAI,CAAE,OAAQ,KAAM,CAAC,EAC3C,KAAKa,GAAKA,EAAE,KAAK,CAAC,EAClB,KAAKX,CAAU,EAEpB,MAAM,4BAA4BF,CAAE,GAAI,CAAE,OAAQ,KAAM,CAAC,EACpD,KAAKa,GAAKA,EAAE,KAAK,CAAC,EAClB,KAAKT,CAAc,CAE5B,EAAG,CAAC,CAAC,EAEG,EAAAgB,QAAA,gBAAAA,QAAA,cAEJ,EAAAA,QAAA,cAAC,OAAI,UAAU,OACX,EAAAA,QAAA,cAAC,UAAO,QAASD,EAAM,UAAU,UAC7B,EAAAC,QAAA,cAAC,SAAE,YAAU,CACjB,EACA,EAAAA,QAAA,cAAC,MAAG,UAAU,eAAc,SAAO,EAClCpB,GAAM,EAAAoB,QAAA,cAAC,UAAO,UAAU,iCAAiC,QAASX,GAC/D,EAAAW,QAAA,cAAC,SAAE,QAAM,EACT,EAAAA,QAAA,cAAC,YAAK,gBAAc,CACxB,CACJ,EAEA,EAAAA,QAAA,cAAC,WAAQ,UAAU,UACf,EAAAA,QAAA,cAAC,MAAG,UAAU,WAAU,SAAO,EAC/B,EAAAA,QAAA,cAAC,QAAK,SAAUV,EAAQ,SAAUI,EAAQ,UAAU,QAChD,EAAAM,QAAA,cAAC,OAAI,UAAU,6BACX,EAAAA,QAAA,cAAC,SAAM,KAAK,YAAY,MAAOnB,EAAQ,UAAW,SAAQ,KAC1D,EAAAmB,QAAA,cAAC,aAAM,YAAU,CACrB,EACA,EAAAA,QAAA,cAAC,OAAI,UAAU,6BACX,EAAAA,QAAA,cAAC,SAAM,KAAK,WAAW,MAAOnB,EAAQ,SAAU,SAAQ,KACxD,EAAAmB,QAAA,cAAC,aAAM,WAAS,CACpB,EACA,EAAAA,QAAA,cAAC,OAAI,UAAU,mBACX,EAAAA,QAAA,cAAC,UAAO,UAAU,SAAS,KAAK,UAC5B,EAAAA,QAAA,cAAC,SAAGpB,EAAK,OAAS,KAAM,EACxB,EAAAoB,QAAA,cAAC,YAAMpB,EAAK,OAAS,KAAM,CAC/B,CACJ,CACJ,CACJ,EAEA,EAAAoB,QAAA,cAAC,WAAQ,UAAU,UACf,EAAAA,QAAA,cAAC,OAAI,UAAU,eACX,EAAAA,QAAA,cAAC,MAAG,UAAU,OAAM,aAAW,EAC/B,EAAAA,QAAA,cAAC,KAAE,UAAU,gBAAgB,KAAM,uBAAuBnB,EAAQ,EAAE,IAChE,EAAAmB,QAAA,cAAC,SAAE,KAAG,EACN,EAAAA,QAAA,cAAC,YAAK,gBAAc,CACxB,CACJ,EACA,EAAAA,QAAA,cAAC,MAAG,UAAU,2BACTjB,EAAY,IAAIkB,GAAc,EAAAD,QAAA,gBAAAA,QAAA,cAC3B,EAAAA,QAAA,cAAC,UACG,EAAAA,QAAA,cAAC,SAAE,YAAU,EACb,EAAAA,QAAA,cAAC,QAAK,UAAU,OAAOC,EAAW,KAAM,EACxC,EAAAD,QAAA,cAAC,KAAE,UAAU,gBAAgB,KAAM,kBAAkBC,EAAW,EAAE,YAAYpB,EAAQ,EAAE,IAAI,MAAI,CACpG,CACJ,CAAG,CACP,CACJ,EAEA,EAAAmB,QAAA,cAAC,UAAO,UAAU,QAAQ,KAAMf,GAC5B,EAAAe,QAAA,cAAC,OAAI,UAAU,QACX,EAAAA,QAAA,cAAC,MAAG,UAAU,OAAM,gBAAc,EAClC,EAAAA,QAAA,cAAC,UAAO,UAAU,KAAK,QAASZ,GAC5B,EAAAY,QAAA,cAAC,SAAE,OAAK,CACZ,CACJ,EACA,EAAAA,QAAA,cAAC,SAAE,kCAAgC,CACvC,CAEJ,CACJ",
  "names": ["import_react", "patient_default", "id", "patient", "setPatient", "medications", "setMedications", "modalState", "setModalState", "modalOpen", "modalClose", "remove", "submit", "e", "result", "r", "change", "type", "name", "value", "checked", "back", "React", "medication"]
}
